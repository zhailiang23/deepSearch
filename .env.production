# 生产环境配置文件
# 请根据实际环境修改这些值

# ===================
# 应用基础配置
# ===================
APP_ENV=production
NODE_ENV=production
LOG_LEVEL=INFO
DEBUG=false

# ===================
# 数据库配置
# ===================
DB_HOST=postgres
DB_PORT=5432
DB_NAME=mgmt_db
DB_USERNAME=mgmt_user
# 请设置强密码 - 至少包含大小写字母、数字和特殊字符
DB_PASSWORD=your_secure_db_password_here
DB_SSL_MODE=require
DB_POOL_SIZE=20
DB_CONNECTION_TIMEOUT=30000

# ===================
# Redis配置
# ===================
REDIS_HOST=redis
REDIS_PORT=6379
# Redis密码 - 请设置复杂密码
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_DB=0
REDIS_POOL_SIZE=10

# ===================
# JWT安全配置
# ===================
# JWT密钥 - 必须至少256位，请使用随机生成的强密钥
JWT_SECRET=your_super_secret_jwt_signing_key_min_256_bits_here
JWT_ACCESS_TOKEN_EXPIRATION=3600000
JWT_REFRESH_TOKEN_EXPIRATION=2592000000
JWT_ISSUER=deepSearch
JWT_AUDIENCE=deepSearch-users

# ===================
# 安全策略配置
# ===================
# 登录安全
MAX_FAILED_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
ATTEMPT_RESET_HOURS=24

# IP访问控制
IP_RATE_LIMIT_PER_MINUTE=100
IP_LOGIN_ATTEMPTS_PER_HOUR=20
IP_BLACKLIST_DURATION_MINUTES=60
ENABLE_IP_CONTROL=true

# 延迟策略
ENABLE_PROGRESSIVE_DELAY=true
BASE_DELAY_SECONDS=1
MAX_DELAY_SECONDS=60

# 可疑活动检测
ENABLE_SUSPICIOUS_ACTIVITY_DETECTION=true
SUSPICIOUS_ACTIVITY_THRESHOLD=3
ENABLE_GEOLOCATION_DETECTION=false
ENABLE_USER_AGENT_DETECTION=true

# ===================
# 管理员配置
# ===================
ADMIN_EMAIL=admin@yourdomain.com
# 管理员初始密码 - 首次登录后请立即修改
ADMIN_PASSWORD=your_secure_admin_password_here

# ===================
# 邮件服务配置
# ===================
SMTP_HOST=your-smtp-server.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your_smtp_password_here
MAIL_FROM_NAME=deepSearch System
MAIL_FROM_ADDRESS=noreply@yourdomain.com

# ===================
# SSL/TLS配置
# ===================
# SSL证书路径（相对于Docker容器内）
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_ENABLED=true

# HTTPS重定向
HTTPS_REDIRECT=true
HSTS_MAX_AGE=31536000

# ===================
# 文件存储配置
# ===================
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# ===================
# 缓存配置
# ===================
CACHE_TTL=3600
CACHE_MAX_SIZE=100
ENABLE_REDIS_CACHE=true

# ===================
# API配置
# ===================
API_BASE_URL=https://yourdomain.com/api
CORS_ORIGINS=https://yourdomain.com
API_RATE_LIMIT=1000
API_TIMEOUT=30000

# ===================
# 监控和日志
# ===================
LOG_FILE_PATH=/app/logs/application.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10MB
ENABLE_ACCESS_LOG=true

# 健康检查
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# 监控端点
METRICS_ENABLED=true
METRICS_PATH=/metrics

# ===================
# 外部服务
# ===================
# Sentry错误监控（可选）
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# 第三方API（如果使用）
EXTERNAL_API_KEY=
EXTERNAL_API_URL=

# ===================
# 备份配置
# ===================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backup

# ===================
# Docker配置
# ===================
COMPOSE_PROJECT_NAME=mgmt-prod
DOCKER_RESTART_POLICY=unless-stopped

# 资源限制
BACKEND_MEMORY_LIMIT=1g
BACKEND_CPU_LIMIT=1.0
FRONTEND_MEMORY_LIMIT=256m
POSTGRES_MEMORY_LIMIT=1g
REDIS_MEMORY_LIMIT=256m

# ===================
# 网络配置
# ===================
# 服务端口（容器内部）
BACKEND_PORT=8080
FRONTEND_PORT=80
POSTGRES_PORT=5432
REDIS_PORT=6379

# 外部访问端口
HTTP_PORT=80
HTTPS_PORT=443

# ===================
# 特性开关
# ===================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_PASSWORD_RESET_ENABLED=true
FEATURE_EMAIL_VERIFICATION_ENABLED=true
FEATURE_TWO_FACTOR_AUTH_ENABLED=false
FEATURE_SOCIAL_LOGIN_ENABLED=false

# ===================
# 性能调优
# ===================
# JVM参数（后端）
JAVA_OPTS=-server -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseStringDeduplication
JAVA_MAX_HEAP=768m
JAVA_MIN_HEAP=256m

# Node.js参数（如果使用）
NODE_OPTIONS=--max-old-space-size=256

# ===================
# 开发和调试（生产环境应禁用）
# ===================
DEBUG_MODE=false
ENABLE_SWAGGER=false
ENABLE_ACTUATOR_ENDPOINTS=true
SHOW_ERROR_DETAILS=false