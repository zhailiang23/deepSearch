# 智能搜索系统测试用例

## 测试环境说明

- **测试数据文件**: `search_test_data.json` 和 `extended_search_test_data.json`
- **测试服务地址**: http://localhost:8019/ibbp-channel-global-search-service
- **Elasticsearch地址**: https://es01:9200
- **数据库**: MySQL

## 1. 数据管理方式测试

### 1.1 搜索规则数据库存储测试
**测试目标**: 验证搜索规则存储在关系型数据库中

| 用例编号 | TC_DATA_001 |
|---------|-------------|
| 测试标题 | 搜索配置规则数据库存储 |
| 前置条件 | 数据库正常连接，searchConfigs表存在 |
| 测试步骤 | 1. 查询数据库中的searchConfigs表<br>2. 验证配置数据存在<br>3. 检查字段完整性 |
| 预期结果 | 搜索配置规则正确存储在数据库中，包含资源类型、搜索字段、排序规则等信息 |
| 实际结果 |  |
| 测试状态 |  |

### 1.2 搜索数据ES存储测试
**测试目标**: 验证搜索数据存储在Elasticsearch中

| 用例编号 | TC_DATA_002 |
|---------|-------------|
| 测试标题 | 搜索数据ES存储验证 |
| 前置条件 | ES集群正常运行，索引已创建 |
| 测试步骤 | 1. 连接ES集群<br>2. 查询搜索索引<br>3. 验证数据结构和内容 |
| 预期结果 | 产品、活动、功能、资讯等搜索数据正确存储在ES中 |
| 实际结果 |  |
| 测试状态 |  |

## 2. 搜索资源配置化管理测试

### 2.1 默认资源类型配置测试
**测试目标**: 验证默认支持产品、活动、功能、资讯4种资源类型

| 用例编号 | TC_CONFIG_001 |
|---------|-------------|
| 测试标题 | 默认资源类型配置验证 |
| 前置条件 | 系统正常启动 |
| 测试步骤 | 1. 访问搜索资源配置页面<br>2. 查看默认资源类型列表<br>3. 验证类型完整性 |
| 预期结果 | 默认显示PRODUCT、ACTIVITY、FUNCTION、INFORMATION四种类型 |
| 实际结果 |  |
| 测试状态 |  |

### 2.2 新增资源类型测试
**测试目标**: 验证可以通过页面配置增加新的资源类型

| 用例编号 | TC_CONFIG_002 |
|---------|-------------|
| 测试标题 | 新增自定义资源类型 |
| 前置条件 | 登录系统管理员账号 |
| 测试步骤 | 1. 进入搜索资源配置页面<br>2. 点击"新增资源类型"<br>3. 输入类型名称"PROMOTION"<br>4. 设置显示名称"促销"<br>5. 保存配置 |
| 预期结果 | 新增资源类型成功，列表中显示新类型 |
| 实际结果 |  |
| 测试状态 |  |

### 2.3 资源类型编辑测试
**测试目标**: 验证资源类型配置可以编辑修改

| 用例编号 | TC_CONFIG_003 |
|---------|-------------|
| 测试标题 | 编辑资源类型配置 |
| 前置条件 | 存在可编辑的资源类型 |
| 测试步骤 | 1. 选择一个资源类型进行编辑<br>2. 修改显示名称<br>3. 调整优先级<br>4. 保存修改 |
| 预期结果 | 资源类型配置修改成功，新配置生效 |
| 实际结果 |  |
| 测试状态 |  |

### 2.4 资源类型禁用测试
**测试目标**: 验证可以禁用不需要的资源类型

| 用例编号 | TC_CONFIG_004 |
|---------|-------------|
| 测试标题 | 禁用资源类型 |
| 前置条件 | 存在可禁用的资源类型 |
| 测试步骤 | 1. 选择一个资源类型<br>2. 设置状态为禁用<br>3. 保存配置<br>4. 进行搜索测试 |
| 预期结果 | 被禁用的资源类型不会出现在搜索结果中 |
| 实际结果 |  |
| 测试状态 |  |

## 3. 数据批量导入测试

### 3.1 JSON文件格式验证测试
**测试目标**: 验证JSON文件格式要求

| 用例编号 | TC_IMPORT_001 |
|---------|-------------|
| 测试标题 | JSON文件格式验证 |
| 前置条件 | 准备测试JSON文件 |
| 测试步骤 | 1. 上传正确格式的JSON文件<br>2. 上传格式错误的JSON文件<br>3. 上传空文件<br>4. 验证系统响应 |
| 预期结果 | 正确格式文件导入成功，错误格式文件提示错误信息 |
| 实际结果 |  |
| 测试状态 |  |

### 3.2 批量导入功能测试
**测试目标**: 验证批量导入检索数据功能

| 用例编号 | TC_IMPORT_002 |
|---------|-------------|
| 测试标题 | 批量导入检索数据 |
| 前置条件 | 系统正常运行，有导入权限 |
| 测试步骤 | 1. 准备包含500条数据的JSON文件<br>2. 访问数据导入页面<br>3. 选择上传文件<br>4. 点击导入<br>5. 查看导入结果 |
| 预期结果 | 数据成功导入ES，可以正常搜索到导入的数据 |
| 实际结果 |  |
| 测试状态 |  |

### 3.3 数据覆盖策略测试
**测试目标**: 验证重复数据的覆盖策略

| 用例编号 | TC_IMPORT_003 |
|---------|-------------|
| 测试标题 | 重复数据覆盖策略 |
| 前置条件 | ES中已存在部分测试数据 |
| 测试步骤 | 1. 准备包含重复ID的JSON文件<br>2. 执行导入操作<br>3. 检查重复数据处理结果 |
| 预期结果 | 重复数据按配置策略处理（覆盖/跳过/追加） |
| 实际结果 |  |
| 测试状态 |  |

### 3.4 大文件导入性能测试
**测试目标**: 验证大文件导入性能

| 用例编号 | TC_IMPORT_004 |
|---------|-------------|
| 测试标题 | 大文件导入性能测试 |
| 前置条件 | 准备包含10000条数据的大文件 |
| 测试步骤 | 1. 上传大文件<br>2. 监控导入过程<br>3. 记录导入时间<br>4. 验证数据完整性 |
| 预期结果 | 大文件能够正常导入，性能在可接受范围内 |
| 实际结果 |  |
| 测试状态 |  |

## 4. 搜索优化功能测试

### 4.1 拼音搜索测试
**测试目标**: 验证拼音搜索功能

| 用例编号 | TC_SEARCH_001 |
|---------|-------------|
| 测试标题 | 拼音搜索功能验证 |
| 前置条件 | 系统开启拼音搜索功能 |
| 测试步骤 | 1. 搜索"zhuanzhang"<br>2. 搜索"xinyk"<br>3. 搜索"licai"<br>4. 验证搜索结果 |
| 预期结果 | 拼音搜索能够匹配对应的中文内容：转账、信用卡、理财 |
| 实际结果 |  |
| 测试状态 |  |

### 4.2 单字搜索测试
**测试目标**: 验证单字搜索功能

| 用例编号 | TC_SEARCH_002 |
|---------|-------------|
| 测试标题 | 单字搜索功能验证 |
| 前置条件 | 系统开启单字搜索功能 |
| 测试步骤 | 1. 搜索"转"<br>2. 搜索"贷"<br>3. 搜索"存"<br>4. 验证搜索结果 |
| 预期结果 | 单字能够匹配包含该字的相关内容 |
| 实际结果 |  |
| 测试状态 |  |

### 4.3 错别字搜索测试
**测试目标**: 验证错别字纠正功能

| 用例编号 | TC_SEARCH_003 |
|---------|-------------|
| 测试标题 | 错别字纠正搜索 |
| 前置条件 | 系统配置错别字纠正规则 |
| 测试步骤 | 1. 搜索"转帐"（错别字）<br>2. 搜索"里财"（错别字）<br>3. 搜索"信用卡申请"（正确）<br>4. 对比搜索结果 |
| 预期结果 | 错别字能够自动纠正并返回正确结果，系统提示"您是否要搜索：转账" |
| 实际结果 |  |
| 测试状态 |  |

### 4.4 模糊匹配测试
**测试目标**: 验证模糊匹配搜索功能

| 用例编号 | TC_SEARCH_004 |
|---------|-------------|
| 测试标题 | 模糊匹配搜索验证 |
| 前置条件 | 系统开启模糊匹配功能 |
| 测试步骤 | 1. 搜索"转账限"<br>2. 搜索"信用卡申"<br>3. 搜索"个人住房"<br>4. 验证匹配结果 |
| 预期结果 | 部分关键词能够匹配到完整的相关内容 |
| 实际结果 |  |
| 测试状态 |  |

## 5. 搜索规则配置测试

### 5.1 搜索字段配置测试
**测试目标**: 验证可搜索字段的配置功能

| 用例编号 | TC_CONFIG_005 |
|---------|-------------|
| 测试标题 | 搜索字段配置管理 |
| 前置条件 | 登录管理员账号 |
| 测试步骤 | 1. 进入搜索规则配置页面<br>2. 选择产品类型<br>3. 配置title、content、keywords字段为可搜索<br>4. 设置各字段权重<br>5. 保存配置 |
| 预期结果 | 搜索字段配置成功，不同字段按权重影响搜索结果排序 |
| 实际结果 |  |
| 测试状态 |  |

### 5.2 搜索方式配置测试
**测试目标**: 验证不同搜索方式的配置

| 用例编号 | TC_CONFIG_006 |
|---------|-------------|
| 测试标题 | 搜索方式配置验证 |
| 前置条件 | 有配置权限的管理员账号 |
| 测试步骤 | 1. 配置title字段支持：精确匹配、模糊匹配、语义搜索<br>2. 配置content字段支持：模糊匹配、向量搜索<br>3. 配置keywords字段支持：精确匹配<br>4. 保存并测试 |
| 预期结果 | 不同字段按配置的搜索方式进行匹配 |
| 实际结果 |  |
| 测试状态 |  |

### 5.3 字段排序配置测试
**测试目标**: 验证字段排序功能配置

| 用例编号 | TC_CONFIG_007 |
|---------|-------------|
| 测试标题 | 字段排序配置管理 |
| 前置条件 | 系统正常运行 |
| 测试步骤 | 1. 设置title、createTime、priority字段可排序<br>2. 配置默认排序规则<br>3. 测试搜索结果排序 |
| 预期结果 | 搜索结果按配置的字段和规则进行排序 |
| 实际结果 |  |
| 测试状态 |  |

## 6. 排序规则配置测试

### 6.1 精确匹配优先测试
**测试目标**: 验证精确匹配结果排序优先

| 用例编号 | TC_SORT_001 |
|---------|-------------|
| 测试标题 | 精确匹配优先排序 |
| 前置条件 | 配置精确匹配优先规则 |
| 测试步骤 | 1. 搜索"转账"<br>2. 观察搜索结果排序<br>3. 验证精确匹配的结果是否排在前面 |
| 预期结果 | 标题为"转账"的结果排在标题包含"转账"的结果前面 |
| 实际结果 |  |
| 测试状态 |  |

### 6.2 语义相似度排序测试
**测试目标**: 验证语义相似度影响排序

| 用例编号 | TC_SORT_002 |
|---------|-------------|
| 测试标题 | 语义相似度排序验证 |
| 前置条件 | 开启语义搜索功能 |
| 测试步骤 | 1. 搜索"资金转移"<br>2. 观察结果中"转账汇款"的排序<br>3. 验证语义相关性排序 |
| 预期结果 | 语义相似的内容排序靠前 |
| 实际结果 |  |
| 测试状态 |  |

### 6.3 综合排序规则测试
**测试目标**: 验证多种排序规则的综合应用

| 用例编号 | TC_SORT_003 |
|---------|-------------|
| 测试标题 | 综合排序规则验证 |
| 前置条件 | 配置多种排序规则 |
| 测试步骤 | 1. 设置排序优先级：精确匹配>时间>语义相似度<br>2. 搜索"理财产品"<br>3. 验证排序结果 |
| 预期结果 | 搜索结果按照配置的优先级进行排序 |
| 实际结果 |  |
| 测试状态 |  |

## 7. 搜索权限配置测试

### 7.1 空间权限配置测试
**测试目标**: 验证基于空间的搜索权限控制

| 用例编号 | TC_PERM_001 |
|---------|-------------|
| 测试标题 | 空间权限配置验证 |
| 前置条件 | 配置不同空间的权限规则 |
| 测试步骤 | 1. 配置空间1只能搜索产品和功能<br>2. 配置空间2可以搜索所有类型<br>3. 分别在两个空间进行搜索<br>4. 对比搜索结果 |
| 预期结果 | 不同空间的搜索结果符合权限配置 |
| 实际结果 |  |
| 测试状态 |  |

### 7.2 渠道权限配置测试
**测试目标**: 验证基于渠道的搜索权限控制

| 用例编号 | TC_PERM_002 |
|---------|-------------|
| 测试标题 | 渠道权限配置验证 |
| 前置条件 | 配置不同渠道的权限规则 |
| 测试步骤 | 1. 配置手机端可搜索所有内容<br>2. 配置网页端限制搜索某些内容<br>3. 分别通过两个渠道搜索<br>4. 验证权限控制效果 |
| 预期结果 | 不同渠道的搜索权限得到正确控制 |
| 实际结果 |  |
| 测试状态 |  |

### 7.3 角色权限配置测试
**测试目标**: 验证基于角色的搜索权限控制

| 用例编号 | TC_PERM_003 |
|---------|-------------|
| 测试标题 | 角色权限配置验证 |
| 前置条件 | 配置不同角色的权限规则 |
| 测试步骤 | 1. 配置普通客户只能搜索基础内容<br>2. 配置VIP客户可以搜索更多内容<br>3. 使用不同角色账号搜索<br>4. 对比搜索结果 |
| 预期结果 | 不同角色看到的搜索结果符合权限设置 |
| 实际结果 |  |
| 测试状态 |  |

## 8. 语义检索功能测试

### 8.1 关键词关联测试
**测试目标**: 验证搜索关键词与结果的语义关联

| 用例编号 | TC_SEMANTIC_001 |
|---------|-------------|
| 测试标题 | 关键词语义关联验证 |
| 前置条件 | 开启语义检索功能 |
| 测试步骤 | 1. 搜索"转账/限额/管理"<br>2. 验证是否关联到"转账限额管理"<br>3. 搜索"投资理财"<br>4. 验证相关产品推荐 |
| 预期结果 | 搜索词能够智能关联到语义相关的内容 |
| 实际结果 |  |
| 测试状态 |  |

### 8.2 意图理解测试
**测试目标**: 验证系统理解客户搜索意图

| 用例编号 | TC_SEMANTIC_002 |
|---------|-------------|
| 测试标题 | 客户意图理解验证 |
| 前置条件 | 系统具备意图识别能力 |
| 测试步骤 | 1. 搜索"我要买房子"<br>2. 搜索"怎么赚钱"<br>3. 搜索"忘记密码了"<br>4. 验证推荐内容 |
| 预期结果 | 系统能够理解意图并推荐相关的产品或功能 |
| 实际结果 |  |
| 测试状态 |  |

## 9. 搜索统计分析测试

### 9.1 搜索匹配度统计测试
**测试目标**: 验证搜索匹配度统计功能

| 用例编号 | TC_STATS_001 |
|---------|-------------|
| 测试标题 | 搜索匹配度统计验证 |
| 前置条件 | 系统记录搜索日志 |
| 测试步骤 | 1. 进行多次搜索操作<br>2. 访问统计分析页面<br>3. 查看最近7天匹配度数据<br>4. 查看最近30天数据 |
| 预期结果 | 能够统计显示不同时间段的搜索匹配度情况 |
| 实际结果 |  |
| 测试状态 |  |

### 9.2 低匹配度关键词识别测试
**测试目标**: 验证低匹配度关键词识别功能

| 用例编号 | TC_STATS_002 |
|---------|-------------|
| 测试标题 | 低匹配度关键词识别 |
| 前置条件 | 存在搜索日志数据 |
| 测试步骤 | 1. 查看匹配度统计报告<br>2. 筛选匹配度低于60%的搜索<br>3. 分析低匹配度原因<br>4. 导出优化建议 |
| 预期结果 | 能够识别并展示需要优化的关键词和搜索结果 |
| 实际结果 |  |
| 测试状态 |  |

## 10. 全局搜索功能测试

### 10.1 手机银行全局搜索测试
**测试目标**: 验证手机银行全局搜索功能

| 用例编号 | TC_GLOBAL_001 |
|---------|-------------|
| 测试标题 | 手机银行全局搜索验证 |
| 前置条件 | 手机银行应用正常运行 |
| 测试步骤 | 1. 在手机银行搜索框输入"转账"<br>2. 验证搜索结果包含产品、功能、资讯、活动<br>3. 测试各类结果的点击跳转 |
| 预期结果 | 能够搜索到资源库内的全部相关内容 |
| 实际结果 |  |
| 测试状态 |  |

### 10.2 产品代码搜索测试
**测试目标**: 验证通过产品代码搜索功能

| 用例编号 | TC_GLOBAL_002 |
|---------|-------------|
| 测试标题 | 产品代码精确搜索 |
| 前置条件 | 产品数据包含产品代码字段 |
| 测试步骤 | 1. 搜索产品代码"SAV001"<br>2. 搜索产品代码"CC001"<br>3. 验证搜索结果准确性 |
| 预期结果 | 能够通过产品代码精确找到对应产品 |
| 实际结果 |  |
| 测试状态 |  |

## 11. 搜索内容展示优化测试

### 11.1 精准匹配优先展示测试
**测试目标**: 验证精准匹配内容优先展示

| 用例编号 | TC_DISPLAY_001 |
|---------|-------------|
| 测试标题 | 精准匹配优先展示验证 |
| 前置条件 | 系统配置精准匹配优先规则 |
| 测试步骤 | 1. 搜索"信用卡"<br>2. 观察搜索结果排序<br>3. 验证精确匹配结果是否排在前面<br>4. 验证模糊匹配结果排序 |
| 预期结果 | 精确匹配"信用卡"的结果排在包含"信用卡"的模糊匹配结果上方 |
| 实际结果 |  |
| 测试状态 |  |

### 11.2 搜索结果分类展示测试
**测试目标**: 验证搜索结果按类型分类展示

| 用例编号 | TC_DISPLAY_002 |
|---------|-------------|
| 测试标题 | 搜索结果分类展示验证 |
| 前置条件 | 系统支持结果分类展示 |
| 测试步骤 | 1. 搜索"理财"<br>2. 观察结果展示格式<br>3. 验证是否按产品、活动、功能分类<br>4. 检查每类结果的数量显示 |
| 预期结果 | 搜索结果按资源类型分组展示，每组显示数量 |
| 实际结果 |  |
| 测试状态 |  |

## 12. 搜索管理模块测试

### 12.1 搜索资源管理测试
**测试目标**: 验证搜索资源的增删改查功能

| 用例编号 | TC_MANAGE_001 |
|---------|-------------|
| 测试标题 | 搜索资源管理功能验证 |
| 前置条件 | 登录管理员账号 |
| 测试步骤 | 1. 进入搜索管理模块<br>2. 新增一条产品信息<br>3. 编辑现有功能信息<br>4. 删除过期活动信息<br>5. 验证操作结果 |
| 预期结果 | 能够正常管理各类搜索资源，操作后立即生效 |
| 实际结果 |  |
| 测试状态 |  |

### 12.2 批量管理操作测试
**测试目标**: 验证搜索资源批量管理功能

| 用例编号 | TC_MANAGE_002 |
|---------|-------------|
| 测试标题 | 搜索资源批量管理验证 |
| 前置条件 | 存在多条可管理的搜索资源 |
| 测试步骤 | 1. 选择多条搜索资源<br>2. 执行批量启用操作<br>3. 执行批量分类修改<br>4. 执行批量删除操作<br>5. 验证批量操作结果 |
| 预期结果 | 批量操作功能正常，能够高效管理大量资源 |
| 实际结果 |  |
| 测试状态 |  |

## 13. 热门搜索词功能测试

### 13.1 热门搜索词统计测试
**测试目标**: 验证热门搜索词自动统计功能

| 用例编号 | TC_HOT_001 |
|---------|-------------|
| 测试标题 | 热门搜索词自动统计验证 |
| 前置条件 | 系统记录搜索日志 |
| 测试步骤 | 1. 查看热门搜索词统计页面<br>2. 验证统计数据的准确性<br>3. 检查搜索频次排序<br>4. 验证时间范围筛选 |
| 预期结果 | 能够准确统计和展示热门搜索词，按频次排序 |
| 实际结果 |  |
| 测试状态 |  |

### 13.2 手工配置热门词测试
**测试目标**: 验证手工配置热门推荐词功能

| 用例编号 | TC_HOT_002 |
|---------|-------------|
| 测试标题 | 手工配置热门词验证 |
| 前置条件 | 具有热门词配置权限 |
| 测试步骤 | 1. 进入热门词配置页面<br>2. 添加"新春优惠"为推荐词<br>3. 设置优先级和展示位置<br>4. 保存配置并验证展示效果 |
| 预期结果 | 手工配置的热门词能够按设置显示在搜索页面 |
| 实际结果 |  |
| 测试状态 |  |

### 13.3 热门词点击统计测试
**测试目标**: 验证热门词点击行为统计

| 用例编号 | TC_HOT_003 |
|---------|-------------|
| 测试标题 | 热门词点击统计验证 |
| 前置条件 | 存在热门搜索词展示 |
| 测试步骤 | 1. 点击热门搜索词进行搜索<br>2. 查看点击统计数据<br>3. 验证点击率计算准确性<br>4. 检查统计报表数据 |
| 预期结果 | 能够准确统计热门词的点击情况和转化率 |
| 实际结果 |  |
| 测试状态 |  |

## 14. 性能测试

### 14.1 搜索响应时间测试
**测试目标**: 验证搜索功能的响应时间

| 用例编号 | TC_PERF_001 |
|---------|-------------|
| 测试标题 | 搜索响应时间性能验证 |
| 前置条件 | 系统负载正常 |
| 测试步骤 | 1. 执行100次普通搜索<br>2. 执行100次复杂语义搜索<br>3. 记录响应时间<br>4. 计算平均响应时间 |
| 预期结果 | 普通搜索响应时间<500ms，复杂搜索<2s |
| 实际结果 |  |
| 测试状态 |  |

### 14.2 并发搜索测试
**测试目标**: 验证系统并发搜索处理能力

| 用例编号 | TC_PERF_002 |
|---------|-------------|
| 测试标题 | 并发搜索性能验证 |
| 前置条件 | 准备并发测试工具 |
| 测试步骤 | 1. 模拟100个并发用户<br>2. 每用户执行10次搜索<br>3. 监控系统资源使用<br>4. 记录成功率和响应时间 |
| 预期结果 | 系统能稳定处理并发搜索，成功率>99% |
| 实际结果 |  |
| 测试状态 |  |

## 15. 异常情况测试

### 15.1 网络异常测试
**测试目标**: 验证网络异常情况下的系统表现

| 用例编号 | TC_ERROR_001 |
|---------|-------------|
| 测试标题 | 网络异常处理验证 |
| 前置条件 | 能够模拟网络异常 |
| 测试步骤 | 1. 模拟ES连接中断<br>2. 执行搜索操作<br>3. 恢复ES连接<br>4. 验证系统恢复情况 |
| 预期结果 | 系统能够优雅处理网络异常，并在恢复后正常工作 |
| 实际结果 |  |
| 测试状态 |  |

### 15.2 数据异常测试
**测试目标**: 验证数据异常情况下的系统表现

| 用例编号 | TC_ERROR_002 |
|---------|-------------|
| 测试标题 | 数据异常处理验证 |
| 前置条件 | 能够模拟数据异常 |
| 测试步骤 | 1. 导入格式错误的数据<br>2. 导入包含特殊字符的数据<br>3. 导入超大字段的数据<br>4. 验证系统处理结果 |
| 预期结果 | 系统能够识别并处理异常数据，不影响正常功能 |
| 实际结果 |  |
| 测试状态 |  |

---

## 测试执行说明

1. **测试环境准备**：确保测试环境与生产环境配置一致
2. **测试数据准备**：使用提供的JSON测试数据文件
3. **测试执行顺序**：建议按功能模块顺序执行
4. **结果记录**：详细记录每个测试用例的执行结果
5. **问题跟踪**：对发现的问题进行分类和优先级排序

## 测试报告模板

### 测试总结
- 总测试用例数：XX个
- 通过测试用例数：XX个
- 失败测试用例数：XX个
- 测试通过率：XX%

### 主要功能验证结果
- ✅ 搜索基础功能正常
- ✅ 权限控制有效
- ❌ 语义搜索待优化
- ⚠️ 性能需要提升

### 发现问题列表
1. 问题描述
2. 影响级别
3. 复现步骤
4. 修复建议

### 优化建议
1. 功能优化建议
2. 性能优化建议
3. 用户体验优化建议