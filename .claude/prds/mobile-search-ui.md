# 移动端搜索UI演示工具产品需求文档

## 产品概述

### 功能名称
mobile-search-ui (移动端搜索界面演示工具)

### 产品定位
创建一个移动端搜索界面的演示和测试工具，采用双栏布局设计：左侧为高保真手机屏幕模拟器，用于展示搜索效果；右侧为参数设置区，可配置搜索空间、拼音模式等参数。该工具将复用现有的 `ElasticsearchDataController.searchData` 后端服务，为开发者、测试人员和产品经理提供直观的搜索功能演示平台。

### 目标用户
- **产品经理**: 验证搜索功能设计，评估用户体验效果
- **开发工程师**: 测试搜索API接口，调试搜索参数配置
- **测试工程师**: 验证不同参数组合下的搜索功能和性能
- **UI/UX设计师**: 评估移动端搜索界面的视觉效果和交互体验
- **业务人员**: 演示搜索功能给客户或利益相关者

## 需求分析

### 核心价值
1. **可视化演示平台**: 提供直观的搜索效果展示，便于功能演示和评估
2. **参数化测试工具**: 支持实时调整搜索参数，快速验证不同配置效果
3. **高保真移动体验**: 真实模拟手机银行App的搜索界面和交互
4. **开发调试辅助**: 为开发和测试提供便捷的调试和验证工具

### 用户场景
1. **功能演示**: 产品经理向客户展示移动端搜索功能
2. **参数调优**: 开发人员测试不同拼音模式和搜索参数的效果
3. **界面验证**: 设计师验证移动端界面设计的实际效果
4. **功能测试**: 测试人员验证搜索功能在不同配置下的表现

## 功能设计

### 核心功能

#### 1. 双栏布局设计
- **左侧：手机屏幕模拟区**
  - 高保真iPhone设备框架
  - 真实的移动端搜索界面
  - 支持触摸和滚动交互
  - 实时显示搜索结果
- **右侧：参数设置区**
  - 搜索空间选择器
  - 拼音搜索模式配置
  - 搜索参数调整面板
  - 单向同步到左侧展示

#### 2. iPhone屏幕模拟器
- **设备框架**
  - iPhone设备外观
  - 真实的设备尺寸比例
  - 状态栏和导航栏模拟
- **搜索界面**
  - SearchBar组件：占位符"搜索产品、服务或资讯"
  - 清除和取消按钮
  - 搜索建议下拉列表
  - 实时搜索反馈

#### 3. 搜索结果展示
- **结果列表**
  - 无限滚动加载
  - 相关性评分排序
  - 每页20条记录展示
- **结果卡片**
  - 标题高亮匹配关键词
  - 文档内容摘要显示
  - 类型标签和评分信息
  - 点击查看详情

#### 4. 参数设置面板
- **搜索空间配置**
  - 下拉选择可用搜索空间
  - 实时切换并刷新结果
  - 显示搜索空间详细信息
- **拼音搜索设置**
  - 启用/禁用拼音搜索开关
  - 拼音模式选择：AUTO、STRICT、FUZZY
  - 实时生效并更新搜索结果
- **高级搜索选项**
  - 排序方式：相关性、时间、自定义字段
  - 页面大小调整：10/20/50条

#### 5. 单向同步功能
- **参数联动**
  - 右侧参数变更即时反映到左侧界面

### 技术规格

#### API集成
- **后端服务**: `ElasticsearchDataController.searchData`
- **API端点**: `POST /api/elasticsearch/search`
- **请求格式**: `SearchDataRequest`
  ```typescript
  interface SearchRequest {
    searchSpaceId: string;    // 搜索空间ID
    query?: string;           // 搜索查询
    page?: number;            // 页码（默认1）
    size?: number;            // 页大小（默认20）
    enablePinyinSearch?: boolean; // 启用拼音搜索（默认true）
    pinyinMode?: 'AUTO' | 'STRICT' | 'FUZZY'; // 拼音模式
    sort?: {
      field: string;
      order: 'asc' | 'desc';
    };
    filters?: Array<{
      field: string;
      value: any;
      operator: 'eq' | 'contains' | 'startsWith' | 'endsWith' | 'range' | 'in';
    }>;
  }
  ```

- **响应格式**: `SearchDataResponse`
  ```typescript
  interface SearchResponse {
    data: Array<{
      _id: string;
      _score: number;
      _source: Record<string, any>;
      _index: string;
      _version: number;
    }>;
    total: number;
    page: number;
    size: number;
    mapping: {
      mappings: Record<string, any>;
    };
  }
  ```

## UI/UX设计

### 设计原则
1. **桌面端优化**: 针对桌面浏览器的双栏布局设计
2. **移动端模拟**: 左侧高保真模拟真实移动设备
3. **实时反馈**: 参数调整立即反映到界面效果
4. **直观操作**: 简洁明了的参数设置面板

### 视觉设计
- **主色调**: 淡绿色主题（符合系统要求）
- **字体**: 系统默认字体，确保清晰可读
- **图标**: Lucide图标库，保持视觉一致性
- **间距**: 适合桌面端的间距和组件尺寸

### 布局设计
```
┌─────────────────────────────────────────────────────────────┐
│                    移动端搜索界面演示工具                      │
├─────────────────────────┬───────────────────────────────────┤
│                         │          参数设置区                │
│    ┌─────────────────┐  │  ┌─────────────────────────────┐   │
│    │   📱 iPhone     │  │  │ 搜索空间: [下拉选择器]      │   │
│    │  ┌─────────────┐│  │  ├─────────────────────────────┤   │
│    │  │🔍 搜索框    ││  │  │ 拼音搜索: [开关] ON         │   │
│    │  ├─────────────┤│  │  │ 拼音模式: [AUTO] ▼          │   │
│    │  │搜索结果1    ││  │  ├─────────────────────────────┤   │
│    │  │银行理财产品  ││  │  │ 排序方式: [相关性] ▼        │   │
│    │  │高收益理财... ││  │  │ 页面大小: [20] 条           │   │
│    │  ├─────────────┤│  │  ├─────────────────────────────┤   │
│    │  │搜索结果2    ││  │  │                             │   │
│    │  │...          ││  │  │ [重置参数] [导出配置]        │   │
│    │  │             ││  │  │                             │   │
│    │  └─────────────┘│  │  └─────────────────────────────┘   │
│    └─────────────────┘  │                                   │
│   手机屏幕模拟区         │                                   │
└─────────────────────────┴───────────────────────────────────┘
```

### 交互设计
- **参数联动**
  - 右侧参数调整立即更新左侧界面
- **配置管理**
  - 参数配置导出/导入
  - 预设配置快速切换

## 技术实现

### 前端技术栈
- **框架**: Vue 3 + TypeScript + Composition API
- **UI组件**: shadcn-vue（基于现有技术栈）
- **样式**: TailwindCSS（淡绿色主题）
- **状态管理**: Pinia
- **HTTP客户端**: Axios
- **构建工具**: Vite

### 组件结构
```
src/pages/mobile-demo/
├── MobileSearchDemo.vue          # 主演示页面（双栏布局）
├── components/
│   ├── PhoneSimulator.vue        # 手机模拟器容器
│   ├── DeviceFrame.vue           # 设备外框组件
│   ├── MobileSearchApp.vue       # 移动端搜索应用
│   ├── ParameterPanel.vue        # 参数设置面板
│   ├── SearchSpaceSelector.vue   # 搜索空间选择器
│   ├── PinyinModeSelector.vue    # 拼音模式选择器
│   ├── AdvancedOptions.vue       # 高级选项面板
│   └── ConfigManager.vue         # 配置管理组件
├── mobile/                       # 移动端搜索组件
│   ├── SearchBar.vue             # 搜索输入框
│   ├── SearchResults.vue         # 搜索结果列表
│   ├── ResultCard.vue            # 结果卡片
│   └── LoadingSpinner.vue        # 加载指示器
├── composables/
│   ├── useSearchDemo.ts          # 演示逻辑Hook
│   ├── useParameterSync.ts       # 参数同步Hook
│   ├── useDeviceSimulator.ts     # 设备模拟器Hook
│   └── useConfigManager.ts       # 配置管理Hook
└── types/
    ├── demo.ts                   # 演示相关类型
    └── device.ts                 # 设备模拟类型
```

### 关键实现特性
1. **双栏响应式布局**
   - CSS Grid实现灵活布局
   - 支持面板大小调整
   - 适配不同屏幕尺寸

2. **设备模拟器**
   - CSS变换实现设备外观
   - iframe或组件隔离移动端界面
   - 真实的触摸事件模拟

3. **参数单向同步**
   - 响应式状态管理
   - 防抖处理避免频繁请求

4. **配置持久化**
   - localStorage保存用户配置
   - 导出/导入JSON配置文件
   - 预设配置模板

## 成功指标

### 功能指标
- **演示效果**: 真实模拟移动端搜索体验
- **参数同步**: 实时反映配置变更效果 < 300ms
- **界面保真度**: 与真实移动端界面相似度 > 95%
- **配置管理**: 支持10+种预设配置

### 性能指标
- **页面加载时间** < 3秒
- **参数调整响应时间** < 500ms
- **搜索结果更新时间** < 1秒
- **设备切换动画** 流畅60fps

### 用户体验指标
- **工具易用性** > 4.5/5分
- **演示效果满意度** > 4.2/5分
- **参数调试效率** 提升50%以上
- **功能覆盖率** > 90%核心搜索功能

### 技术指标
- **浏览器兼容性** 支持Chrome 90+, Firefox 88+, Safari 14+
- **屏幕适配** 1920x1080及以上分辨率
- **响应式支持** 最小宽度1200px
- **无障碍性** 支持键盘导航和屏幕阅读器

## 开发里程碑

### 阶段一：基础框架搭建 (第1-2周)
- [ ] 双栏布局基础结构
- [ ] 设备模拟器框架
- [ ] 参数面板基础组件
- [ ] 状态管理架构搭建

### 阶段二：核心功能开发 (第3-4周)
- [ ] 移动端搜索界面组件
- [ ] 参数实时同步机制
- [ ] API集成和数据处理
- [ ] 设备外观和动画效果

### 阶段三：高级功能实现 (第5-6周)
- [ ] 配置管理和持久化
- [ ] 预设配置模板
- [ ] 高级搜索参数面板
- [ ] 导出/导入功能

### 阶段四：优化和完善 (第7-8周)
- [ ] 性能优化和用户体验改进
- [ ] 跨浏览器兼容性测试
- [ ] 文档编写和使用说明
- [ ] 部署和交付准备

## 风险评估

### 技术风险
- **性能挑战**: 双界面实时同步可能影响性能
- **兼容性问题**: 不同浏览器的CSS支持差异
- **状态同步复杂性**: 参数和界面状态保持一致

### 缓解措施
- 实现高效的状态管理和防抖机制
- 建立完整的浏览器测试矩阵
- 设计清晰的单向同步策略和错误处理

## 后续扩展

### 近期规划
- 添加搜索性能监控面板
- 支持自定义主题和界面风格
- 增加搜索分析和统计功能

### 长期规划
- A/B测试功能集成
- 用户行为录制和回放
- 搜索质量评估工具
- 多语言界面支持

---

*本PRD文档版本: v2.1*
*创建日期: 2025-09-26*
*最后更新: 2025-09-26T09:30:00Z*