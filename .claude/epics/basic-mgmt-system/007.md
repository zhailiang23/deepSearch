---
name: 用户管理页面实现
status: open
created: 2025-09-21T08:10:54Z
updated: 2025-09-21T08:10:54Z
github: [Will be updated when synced to GitHub]
depends_on: [006]  # 需要登录功能完成
parallel: false  # 需要登录功能完成后执行
conflicts_with: []
---

# Task: 用户管理页面实现

## Description

实现完整的用户管理功能界面，包括用户列表展示、搜索筛选、创建编辑用户、状态管理和批量操作。基于shadcn-vue组件库创建现代化的管理界面，集成用户管理API，提供完整的用户CRUD操作体验。适配管理员和普通用户的不同权限需求。

## Acceptance Criteria

- [ ] 创建用户管理主页面（UserManagement.vue）
- [ ] 实现用户列表表格展示（支持分页）
- [ ] 添加用户搜索和筛选功能
- [ ] 实现创建用户弹窗表单
- [ ] 实现编辑用户弹窗表单
- [ ] 添加用户状态管理（启用/禁用/锁定）
- [ ] 实现用户删除功能（软删除）
- [ ] 添加批量操作支持
- [ ] 实现权限控制（管理员vs普通用户）
- [ ] 支持移动端响应式设计

## Technical Details

### 主要组件开发
1. **UserManagement主页面**
   - 用户列表表格（DataTable组件）
   - 搜索条件面板
   - 操作按钮区域
   - 分页组件

2. **UserFormModal组件**
   - 创建/编辑用户通用表单
   - 表单验证（用户名、邮箱、密码等）
   - 角色选择和状态设置
   - 表单提交和错误处理

3. **UserActionMenu组件**
   - 用户操作下拉菜单
   - 编辑、禁用、删除等操作
   - 权限控制显示

### 状态管理
```javascript
// userManagementStore.js
export const useUserManagementStore = defineStore('userManagement', {
  state: () => ({
    users: [],
    loading: false,
    pagination: {
      current: 1,
      pageSize: 10,
      total: 0
    },
    searchFilter: {
      keyword: '',
      status: '',
      role: ''
    }
  }),
  actions: {
    async fetchUsers(params),
    async createUser(userData),
    async updateUser(id, userData),
    async deleteUser(id),
    async updateUserStatus(id, status),
    async batchUpdateUsers(ids, action)
  }
})
```

### API集成
- 获取用户列表：GET /api/users?page=1&size=10&search=xxx&status=ACTIVE
- 创建用户：POST /api/users
- 更新用户：PUT /api/users/{id}
- 删除用户：DELETE /api/users/{id}
- 更新状态：PUT /api/users/{id}/status

### 权限控制
- 管理员：完整CRUD权限
- 普通用户：仅查看个人信息和修改个人资料
- 基于角色显示/隐藏操作按钮

### 文件结构
```
frontend/src/
├── views/
│   └── UserManagement.vue
├── components/
│   ├── UserFormModal.vue
│   ├── UserActionMenu.vue
│   ├── DataTable.vue
│   └── ConfirmDialog.vue
├── stores/
│   └── userManagementStore.js
└── composables/
    └── useUserPermissions.js
```

### UI/UX设计要求
- 表格支持排序和筛选
- 响应式设计适配移动端
- 加载状态和空数据状态
- 操作确认对话框
- 友好的错误提示信息

## Dependencies

- [ ] 任务006：登录页面和认证完成
- [ ] 任务004：用户管理API完整实现
- [ ] shadcn-vue Table组件
- [ ] 权限管理系统基础

## Effort Estimate

- Size: L (大型)
- Hours: 24-32小时
- Parallel: false (需要登录功能支持)

## Definition of Done

- [ ] 用户管理页面UI完整实现
- [ ] 用户列表、搜索、分页功能正常
- [ ] 创建、编辑、删除用户功能完整
- [ ] 用户状态管理功能正常
- [ ] 权限控制正确实现
- [ ] 批量操作功能可用
- [ ] 移动端响应式适配完成
- [ ] 组件单元测试完成
- [ ] 集成测试通过（用户管理流程）
- [ ] 错误处理和加载状态完善
- [ ] 代码审查通过
- [ ] 功能测试验收通过