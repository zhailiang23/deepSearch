---
name: 登录页面实现
status: open
created: 2025-09-21T08:10:54Z
updated: 2025-09-21T08:10:54Z
github: [Will be updated when synced to GitHub]
depends_on: [004, 005]  # 需要用户管理API和前端基础
parallel: false  # 需要API和前端基础完成后执行
conflicts_with: []
---

# Task: 登录页面实现

## Description

实现用户登录界面和认证流程，包括登录表单设计、用户认证逻辑、JWT Token管理、会话状态维护和错误处理机制。基于shadcn-vue组件库创建现代化的登录界面，集成Spring Boot认证API，实现完整的用户登录体验。

## Acceptance Criteria

- [ ] 创建美观的登录页面组件（LoginPage.vue）
- [ ] 实现用户名/邮箱 + 密码登录表单
- [ ] 集成JWT认证API（/api/auth/login）
- [ ] 实现Token存储和自动刷新机制
- [ ] 添加"记住我"功能
- [ ] 实现登录状态管理（Pinia store）
- [ ] 添加登录错误处理和友好提示
- [ ] 实现路由守卫保护私有页面
- [ ] 支持登录成功后页面跳转
- [ ] 适配移动端响应式设计

## Technical Details

### 前端实现
1. **LoginPage组件开发**
   - 使用shadcn-vue的Form组件
   - 集成Tailwind CSS样式
   - 实现表单验证（用户名、密码必填）
   - 添加加载状态和提交按钮

2. **认证API集成**
   - 配置Axios拦截器处理JWT Token
   - 实现登录API调用（POST /api/auth/login）
   - 处理认证响应和错误码

3. **状态管理**
   ```javascript
   // userStore.js
   export const useUserStore = defineStore('user', {
     state: () => ({
       currentUser: null,
       isAuthenticated: false,
       token: null,
       refreshToken: null
     }),
     actions: {
       async login(credentials),
       async logout(),
       async refreshToken(),
       async getCurrentUser()
     }
   })
   ```

4. **路由守卫**
   - 实现router.beforeEach导航守卫
   - 检查认证状态
   - 处理登录重定向

### 后端API要求
- 登录接口：POST /api/auth/login
- 请求格式：{ username, password, rememberMe }
- 响应格式：{ token, refreshToken, user, expiresIn }
- 错误处理：返回具体错误码和消息

### 文件结构
```
frontend/src/
├── components/
│   ├── LoginPage.vue
│   └── ui/ (shadcn-vue组件)
├── stores/
│   └── userStore.js
├── router/
│   └── index.js (路由守卫)
└── utils/
    └── auth.js (认证工具函数)
```

## Dependencies

- [ ] 任务004：用户管理API完成
- [ ] 任务005：前端基础组件和布局完成
- [ ] shadcn-vue组件库集成
- [ ] Axios HTTP客户端配置
- [ ] Vue Router路由配置

## Effort Estimate

- Size: M (中等)
- Hours: 16-20小时
- Parallel: false (需要依赖任务完成)

## Definition of Done

- [ ] 登录页面UI实现并符合设计要求
- [ ] 用户认证流程完整功能正常
- [ ] JWT Token管理和自动刷新工作正常
- [ ] 路由守卫保护私有页面
- [ ] 登录错误处理完善
- [ ] 移动端响应式适配完成
- [ ] 单元测试编写完成（组件测试）
- [ ] 集成测试通过（登录流程）
- [ ] 代码审查通过
- [ ] 功能测试验收通过