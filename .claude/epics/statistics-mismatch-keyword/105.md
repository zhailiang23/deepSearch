---
name: 排行榜服务开发
status: open
created: 2025-09-28T07:38:06Z
updated: 2025-09-28T07:50:47Z
github: https://github.com/zhailiang23/deepSearch/issues/105
depends_on: []
parallel: true
conflicts_with: []
---


# Task: 排行榜服务开发

## Description
开发RankingService服务，基于MismatchAnalysisService的统计结果，实现Top10不匹配关键词的筛选、排序和格式化功能。提供实时计算和缓存机制，确保排行榜数据的及时性和准确性，为前端展示提供标准化的数据接口。

## Acceptance Criteria
- [ ] 创建RankingService服务类，实现排行榜生成的核心逻辑
- [ ] 实现Top10关键词筛选算法，按不匹配度得分降序排列
- [ ] 实现结果格式化，包含关键词、不匹配度得分、搜索次数、时间戳等信息
- [ ] 提供多时间维度排行榜：实时、日榜、周榜、月榜
- [ ] 实现实时计算触发逻辑，当新的搜索日志产生时自动更新排行榜
- [ ] 集成缓存机制，提升排行榜查询性能

## Technical Details
- 服务类位置：backend/src/main/java/com/ynet/mgmt/service/RankingService.java
- 排序算法：按加权不匹配度得分降序排列，取前10名
- 数据格式：
  ```java
  public class KeywordRankingDTO {
      private String keyword;
      private Double mismatchScore;
      private Integer searchCount;
      private LocalDateTime lastSearchTime;
      private Integer ranking;
  }
  ```
- 时间维度：REALTIME, DAILY, WEEKLY, MONTHLY
- 实时更新：集成Spring Events，监听搜索日志新增事件
- 缓存策略：Redis缓存，TTL根据时间维度设置
- 性能要求：排行榜查询响应时间 < 100ms

## Dependencies
- [ ] 任务002：MismatchAnalysisService服务完成
- [ ] Redis缓存服务配置正确
- [ ] Spring Events事件机制配置完成

## Effort Estimate
- Size: S
- Hours: 8-16小时
- Parallel: false

## Definition of Done
- [ ] RankingService服务实现完成
- [ ] Top10筛选和排序算法测试通过
- [ ] 多时间维度排行榜功能测试通过
- [ ] 实时计算触发逻辑测试通过
- [ ] 缓存机制性能测试通过
- [ ] 单元测试和集成测试覆盖率达到90%以上
- [ ] API接口响应时间满足性能要求
- [ ] 代码审查完成
- [ ] 排行榜数据格式文档编写完成
