# Task 081: 参数设置面板组件

## Metadata
```yaml
epic: mobile-search-ui
task_id: 081
title: 参数设置面板组件
status: pending
priority: high
created: 2025-09-26T10:30:01Z
updated: 2025-09-26T18:45:00Z
effort_estimate: M (10-14 hours)
parallel: true
depends_on: [078]
github: https://github.com/zhailiang23/deepSearch/issues/81
```

## 描述

创建右侧参数设置面板，包含搜索空间选择、拼音搜索配置和分页设置。提供可视化的参数调整界面，实时同步到移动端搜索界面，便于演示和测试不同搜索配置的效果。

## 目标

- [ ] 创建参数设置面板组件
- [ ] 实现搜索空间选择器
- [ ] 设计拼音搜索配置界面
- [ ] 创建分页设置组件
- [ ] 添加参数重置和预设功能
- [ ] 实现实时参数预览和应用

## 技术要求

### 面板设计
- 固定宽度300px的右侧面板
- 分组折叠的配置项组织
- 淡绿色主题的表单控件
- 响应式的设置项布局
- 实时参数验证和提示

### 组件架构
- 主面板: `ParameterPanel.vue`
- 搜索空间: `SearchSpaceSelector.vue`
- 拼音配置: `PinyinSearchConfig.vue`
- 分页设置: `PagingConfig.vue`
- 预设管理: `ConfigPresets.vue`
- 参数同步: `ParameterSync.vue`

### 配置功能
- 搜索空间多选和切换
- 拼音搜索开关和模式设置
- 分页大小和加载方式配置
- 搜索防抖时间设置
- 结果显示格式配置
- 参数导入导出功能

## 实现细节

### 文件变更
1. `frontend/src/components/demo/ParameterPanel.vue` - 主参数面板
2. `frontend/src/components/demo/SearchSpaceSelector.vue` - 搜索空间选择器
3. `frontend/src/components/demo/PinyinSearchConfig.vue` - 拼音搜索配置
4. `frontend/src/components/demo/PagingConfig.vue` - 分页设置
5. `frontend/src/components/demo/ConfigPresets.vue` - 配置预设
6. `frontend/src/types/demo.ts` - 相关类型定义

### 参数配置数据结构
```typescript
interface SearchDemoConfig {
  // 搜索空间配置
  searchSpaces: {
    selected: string[];
    available: SearchSpaceOption[];
    allowMultiple: boolean;
  };

  // 拼音搜索配置
  pinyinSearch: {
    enabled: boolean;
    mode: 'fuzzy' | 'exact' | 'both';
    toneIgnore: boolean;
    segmentMatch: boolean;
  };

  // 分页配置
  pagination: {
    pageSize: number;
    loadMode: 'pagination' | 'infinite' | 'loadMore';
    initialLoad: number;
    prefetchNext: boolean;
  };

  // 搜索行为配置
  searchBehavior: {
    debounceMs: number;
    minQueryLength: number;
    autoSearch: boolean;
    highlightMatch: boolean;
  };

  // 结果显示配置
  resultDisplay: {
    showMetadata: boolean;
    maxContentLength: number;
    showScore: boolean;
    groupByType: boolean;
  };
}

interface SearchSpaceOption {
  id: string;
  name: string;
  description?: string;
  fields: string[];
  enabled: boolean;
  indexCount?: number;
}
```

### 组件API设计
```typescript
// ParameterPanel.vue props
interface ParameterPanelProps {
  modelValue: SearchDemoConfig;
  collapsed?: boolean;
  showPresets?: boolean;
  allowReset?: boolean;
}

// SearchSpaceSelector.vue props
interface SearchSpaceSelectorProps {
  modelValue: string[];
  options: SearchSpaceOption[];
  multiple?: boolean;
  showDetails?: boolean;
}

// PinyinSearchConfig.vue props
interface PinyinSearchConfigProps {
  modelValue: SearchDemoConfig['pinyinSearch'];
  disabled?: boolean;
}

// PagingConfig.vue props
interface PagingConfigProps {
  modelValue: SearchDemoConfig['pagination'];
  maxPageSize?: number;
  minPageSize?: number;
}
```

### UI组件设计
- 使用折叠面板组织配置分组
- 开关、下拉选择、数字输入等表单控件
- 实时预览和参数验证
- 参数变更的撤销/重做功能
- 配置预设的保存和加载

### 样式实现
- 淡绿色主题的表单控件 (#10B981)
- 清晰的分组边界和间距
- 悬停和焦点状态的视觉反馈
- 禁用状态的灰化处理
- 移动端友好的触摸目标大小

## 验收标准

- [ ] 参数面板正确渲染所有配置项
- [ ] 搜索空间选择器功能完整
- [ ] 拼音搜索配置正常工作
- [ ] 分页设置可正确调整
- [ ] 参数变更实时同步到搜索界面
- [ ] 预设功能保存和加载正常
- [ ] 参数验证和错误提示完整
- [ ] 界面响应式适配良好
- [ ] 用户体验流畅无明显延迟

## 测试要求

- [ ] 各配置组件的单元测试
- [ ] 参数验证逻辑测试
- [ ] 参数同步机制测试
- [ ] 预设保存和加载测试
- [ ] 用户交互流程测试
- [ ] 边界值和异常情况测试
- [ ] 浏览器兼容性测试

## 用户界面设计

### 面板布局
```
┌─ 参数设置面板 ──────────┐
│ ┌─ 搜索空间选择 ──────┐ │
│ │ □ 用户信息          │ │
│ │ ☑ 文章内容          │ │
│ │ □ 系统日志          │ │
│ └────────────────────┘ │
│                        │
│ ┌─ 拼音搜索配置 ──────┐ │
│ │ ☑ 启用拼音搜索      │ │
│ │ 模式: [模糊匹配 ▼]   │ │
│ │ □ 忽略声调          │ │
│ │ ☑ 分段匹配          │ │
│ └────────────────────┘ │
│                        │
│ ┌─ 分页设置 ──────────┐ │
│ │ 页面大小: [20    ]   │ │
│ │ 加载模式: [无限滚动▼] │ │
│ │ ☑ 预加载下一页      │ │
│ └────────────────────┘ │
│                        │
│ ┌─ 高级设置 ──────────┐ │
│ │ 防抖延迟: [300ms ]   │ │
│ │ 最小查询长度: [1  ]   │ │
│ │ ☑ 自动搜索          │ │
│ └────────────────────┘ │
│                        │
│ [重置] [应用] [保存预设] │
└────────────────────────┘
```

### 交互设计
- 配置项分组折叠，默认展开常用设置
- 实时参数预览，无需点击应用按钮
- 参数冲突时显示警告提示
- 支持键盘快捷键操作

### 状态指示
- 配置项的启用/禁用状态
- 参数验证的成功/错误状态
- 参数同步的进行中/完成状态
- 预设的保存/加载状态

## 集成要求

- 与双栏布局组件无缝集成
- 实时同步参数到移动搜索组件
- 支持URL参数的序列化和恢复
- 兼容现有的搜索API接口

### 参数同步机制
```typescript
// 参数变更事件
interface ParameterChangeEvent {
  type: 'searchSpace' | 'pinyin' | 'pagination' | 'behavior' | 'display';
  key: string;
  value: any;
  previous: any;
  timestamp: number;
}

// 同步状态
interface SyncStatus {
  pending: boolean;
  error?: string;
  lastSync: number;
}
```

## 相关任务

- **上游依赖**: Task 078 (双栏布局实现)
- **并行任务**: Task 080 (移动端搜索界面组件)
- **下游依赖**: Task 082 (状态管理和参数同步)

## 注意事项

- 确保参数面板宽度固定，不影响移动端显示区域
- 考虑参数之间的依赖关系和冲突处理
- 保持配置的持久化，避免刷新丢失设置
- 注意大量配置项的性能优化
- 遵循无障碍访问标准

## 扩展功能

- 参数配置的历史记录
- 批量配置导入导出
- 配置项的搜索和过滤
- 高级用户的专家模式
- 配置模板和推荐设置

## 设计参考

- 参考主流IDE的设置面板设计
- 借鉴Chrome DevTools的参数配置界面
- 考虑Material Design的表单规范
- 保持与项目整体风格的一致性