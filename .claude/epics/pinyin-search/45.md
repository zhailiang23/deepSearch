---
name: IndexConfigService动态拼音映射改造
status: open
created: 2025-09-25T07:09:18Z
updated: 2025-09-25T07:18:30Z
github: https://github.com/zhailiang23/deepSearch/issues/45
depends_on: [44]
parallel: false
conflicts_with: []
---

# Task: IndexConfigService动态拼音映射改造

## Description
修改IndexConfigService.generateIndexConfig方法，在分析JSON数据结构时自动识别中文字段并为其添加拼音multi-field映射。实现动态索引映射生成，使新上传的JSON数据自动支持拼音搜索功能。

## Acceptance Criteria
- [ ] 修改generateIndexConfig方法，增加中文字段识别逻辑
- [ ] 为识别出的中文字段自动添加拼音multi-field映射
- [ ] 拼音字段使用已配置的拼音分析器
- [ ] 保持原有索引映射生成逻辑不受影响
- [ ] 支持嵌套对象中的中文字段识别
- [ ] 新生成的索引映射包含拼音支持的配置

## Technical Details
- **修改文件**: IndexConfigService.java
- **核心方法**: generateIndexConfig方法
- **中文字段识别**: 通过正则表达式或Unicode范围检测中文字符
- **Multi-field配置**: 为中文字段添加.pinyin子字段
- **分析器配置**: 使用任务001中配置的拼音分析器
- **映射结构**:
  ```json
  {
    "field_name": {
      "type": "text",
      "fields": {
        "pinyin": {
          "type": "text",
          "analyzer": "pinyin_analyzer"
        }
      }
    }
  }
  ```

## Dependencies
- [ ] 任务001：Elasticsearch拼音插件配置完成
- [ ] IndexConfigService.generateIndexConfig方法可访问
- [ ] 拼音分析器配置可用

## Effort Estimate
- **Size**: L
- **Hours**: 12小时
- **Parallel**: false (依赖任务001)

## Definition of Done
- [ ] generateIndexConfig方法修改完成
- [ ] 中文字段识别算法实现并测试
- [ ] 拼音multi-field映射生成逻辑完成
- [ ] 单元测试覆盖新增功能
- [ ] 集成测试验证索引映射生成正确
- [ ] 代码审查通过
- [ ] 测试环境验证功能正常