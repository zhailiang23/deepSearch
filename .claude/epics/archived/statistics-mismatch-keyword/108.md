---
name: 前端排行榜界面开发
status: open
created: 2025-09-28T07:38:06Z
updated: 2025-09-28T07:50:47Z
github: https://github.com/zhailiang23/deepSearch/issues/108
depends_on: []
parallel: true
conflicts_with: []
---

name: 前端排行榜界面开发
status: pending
created: 2025-09-28T07:38:06Z
updated: 2025-09-28T07:38:06Z
github:
depends_on: ["004"]
parallel: []
conflicts_with: []
---

## Description

开发关键词不匹配度排行榜的前端界面，提供直观的数据展示和交互功能。

## Acceptance Criteria

- [ ] 创建时间选择器组件，支持7天/30天/90天选项
- [ ] 开发排行榜表格组件，展示关键词统计数据
- [ ] 实现加载状态组件，显示实时计算提示
- [ ] 实现实时查询交互和数据刷新功能
- [ ] 确保响应式设计适配不同屏幕尺寸
- [ ] 完善错误处理和用户友好提示
- [ ] 通过前端测试验证功能完整性

## Technical Details

### 组件结构
```
src/views/statistics/
├── MismatchKeywordRanking.vue          # 主页面组件
├── components/
│   ├── TimeRangeSelector.vue           # 时间范围选择器
│   ├── RankingTable.vue                # 排行榜表格
│   ├── LoadingIndicator.vue            # 加载状态指示器
│   └── ErrorMessage.vue                # 错误消息组件
```

### 主要功能实现

#### 1. 时间范围选择器（TimeRangeSelector.vue）
```vue
<template>
  <div class="time-range-selector">
    <div class="btn-group">
      <button
        v-for="option in timeOptions"
        :key="option.value"
        @click="selectTime(option.value)"
        :class="{ active: selectedTime === option.value }"
        class="btn btn-outline-success"
      >
        {{ option.label }}
      </button>
    </div>
  </div>
</template>
```

#### 2. 排行榜表格（RankingTable.vue）
```vue
<template>
  <div class="ranking-table">
    <table class="table table-striped">
      <thead class="table-success">
        <tr>
          <th>排名</th>
          <th>关键词</th>
          <th>不匹配率</th>
          <th>搜索次数</th>
          <th>不匹配次数</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="item in rankingData" :key="item.rank">
          <td>{{ item.rank }}</td>
          <td>{{ item.keyword }}</td>
          <td>
            <span class="badge" :class="getBadgeClass(item.mismatchRate)">
              {{ (item.mismatchRate * 100).toFixed(1) }}%
            </span>
          </td>
          <td>{{ item.searchCount.toLocaleString() }}</td>
          <td>{{ item.mismatchCount.toLocaleString() }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</template>
```

#### 3. 加载状态指示器（LoadingIndicator.vue）
```vue
<template>
  <div class="loading-indicator text-center">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">正在计算...</span>
    </div>
    <p class="mt-2 text-muted">正在实时计算关键词不匹配度数据...</p>
  </div>
</template>
```

### 数据管理和API集成

#### Store定义（mismatchKeywordStore.ts）
```typescript
interface MismatchKeywordState {
  rankingData: MismatchKeywordRanking[]
  loading: boolean
  error: string | null
  selectedTimeRange: TimeRange
  pagination: {
    page: number
    size: number
    total: number
    hasNext: boolean
  }
}

export const useMismatchKeywordStore = defineStore('mismatchKeyword', {
  state: (): MismatchKeywordState => ({
    rankingData: [],
    loading: false,
    error: null,
    selectedTimeRange: '7d',
    pagination: {
      page: 1,
      size: 20,
      total: 0,
      hasNext: false
    }
  }),

  actions: {
    async fetchRankingData(timeRange: TimeRange) {
      this.loading = true
      this.error = null
      try {
        const response = await api.get('/statistics/mismatch-keywords/ranking', {
          params: { timeRange, page: this.pagination.page, size: this.pagination.size }
        })
        this.rankingData = response.data.ranking
        this.pagination = {
          page: response.data.page,
          size: response.data.size,
          total: response.data.totalCount,
          hasNext: response.data.hasNext
        }
      } catch (error) {
        this.error = '数据加载失败，请稍后重试'
      } finally {
        this.loading = false
      }
    }
  }
})
```

### 样式设计（淡绿色主题）
```css
.mismatch-keyword-ranking {
  background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
  min-height: 100vh;
  padding: 20px;
}

.time-range-selector .btn-outline-success {
  border-color: #28a745;
  color: #28a745;
}

.time-range-selector .btn-outline-success.active {
  background-color: #28a745;
  border-color: #28a745;
  color: white;
}

.table-success th {
  background-color: #d4edda;
  border-color: #c3e6cb;
}

.badge.bg-danger { background-color: #dc3545 !important; }
.badge.bg-warning { background-color: #ffc107 !important; }
.badge.bg-success { background-color: #28a745 !important; }
```

### 响应式设计
- 移动端：表格水平滚动
- 平板端：优化列宽分配
- 桌面端：完整表格展示

## Dependencies

- 任务004：API接口开发
- Vue 3 + TypeScript
- Pinia状态管理
- Reka UI组件库
- TailwindCSS样式框架
- Axios HTTP客户端

## Effort Estimate

**2-3天**

- 组件设计和基础实现：1天
- API集成和数据管理：0.5天
- 样式设计和响应式优化：0.5天
- 交互功能和错误处理：0.5天
- 测试和调试：0.5天

## Definition of Done

- [ ] 时间选择器正确切换查询范围
- [ ] 排行榜表格正确展示数据
- [ ] 加载状态和错误提示用户友好
- [ ] 界面在各种设备上正常显示
- [ ] 数据刷新功能工作正常
- [ ] 前端单元测试通过
- [ ] 用户体验测试验证通过
- [ ] 代码审查通过并合并到主分支
- [ ] 与后端API集成测试成功
