---
name: 后端热词统计API和DTO开发
status: closed
created: 2025-09-28T04:16:02Z
updated: 2025-09-28T06:40:53Z
github: https://github.com/zhailiang23/deepSearch/issues/94
depends_on: ["93"]
parallel: false
conflicts_with: []
---

# Task: 后端热词统计API和DTO开发

## Description
基于分词服务开发热词统计功能的后端API，包括在SearchLogController中添加热词统计端点、创建相关DTO类，以及实现热词统计的业务逻辑。该功能将分析搜索日志中的搜索词条，生成热词统计报告。

## Acceptance Criteria
- [x] 在SearchLogController中添加GET /api/search-logs/hot-words端点
- [x] 创建HotWordRequest DTO类支持时间范围和数量限制参数
- [x] 创建HotWordResponse DTO类返回热词统计结果
- [x] 在SearchLogService中添加热词统计业务逻辑
- [x] 支持按时间范围过滤搜索日志
- [x] 支持限制返回的热词数量
- [x] 添加API的集成测试
- [x] 确保API响应格式符合前端需求

## Technical Details
1. **DTO类设计**：
   - 创建com.ynet.mgmt.searchlog.dto.HotWordRequest
     - startDate: LocalDateTime (可选)
     - endDate: LocalDateTime (可选)
     - limit: Integer (默认10)
   - 创建com.ynet.mgmt.searchlog.dto.HotWordResponse
     - word: String
     - count: Long
     - percentage: Double

2. **API端点实现**：
   - 在SearchLogController中添加getHotWords方法
   - 使用@GetMapping("/hot-words")注解
   - 支持RequestParam参数绑定
   - 返回ResponseEntity<List<HotWordResponse>>

3. **业务逻辑实现**：
   - 在SearchLogService接口中添加getHotWords方法
   - 在SearchLogServiceImpl中实现热词统计逻辑
   - 调用ChineseSegmentationService进行分词
   - 统计词频并排序
   - 计算百分比

4. **数据库查询**：
   - 在SearchLogRepository中添加按时间范围查询方法
   - 优化查询性能，考虑索引使用

## Dependencies
- 依赖任务001：需要ChineseSegmentationService分词服务

## Effort Estimate
- Size: M
- Hours: 16-24小时
- Parallel: false

## Definition of Done
- [x] Code implemented
- [x] Tests written and passing
- [x] Documentation updated
- [x] Code reviewed
- [x] API端点可以正常访问
- [x] 返回数据格式正确
- [x] 性能测试通过
- [x] 集成测试验证功能正确性
